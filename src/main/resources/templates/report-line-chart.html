<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Monthly Trends</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4 bg-light">

<h2 class="text-center mb-4">Income vs Expense Trend - <span th:text="${username}"></span></h2>

<div class="container">
    <canvas id="lineChart"></canvas>
</div>

<script th:inline="javascript">
/*<![CDATA[*/
const labels = /*[[${labels}]]*/ [];
const incomeData = /*[[${incomeData}]]*/ [];
const expenseData = /*[[${expenseData}]]*/ [];

const ctx = document.getElementById('lineChart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [
            {
                label: 'Income',
                data: incomeData,
                borderColor: 'green',
                fill: false,
                tension: 0.1
            },
            {
                label: 'Expense',
                data: expenseData,
                borderColor: 'red',
                fill: false,
                tension: 0.1
            }
        ]
    },
    options: {
        responsive: true,
        plugins: {
            title: {
                display: true,
                text: 'Monthly Financial Trends'
            }
        }
    }
});
/*]]>*/
</script>
<div class="text-center mt-4">
    <a th:href="@{/report/dashboard(username=${username})}" class="btn btn-secondary">â¬… Back to Report Dashboard</a>
</div>

</body>
</html>
